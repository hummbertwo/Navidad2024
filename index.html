<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR Model Placement</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
        }

        model-viewer {
            width: 100%;
            height: 80vh;
        }

        #controls {
            display: flex;
            justify-content: center;
            width: 100%;
            padding: 10px;
        }

        button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            background-color: #6200ea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #3700b3;
        }

        #marker {
            position: absolute;
            width: 50px;
            height: 50px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            border: 2px solid #6200ea;
            display: none; /* Inicialmente oculto */
        }
    </style>
</head>
<body>

<!-- Modelo 3D y marcador -->
<model-viewer 
    id="ar-viewer"
    src="https://modelviewer.dev/shared-assets/models/Astronaut.glb"
    ar
    ar-modes="scene-viewer quick-look webxr"
    camera-controls
    auto-rotate
    alt="A 3D model of an astronaut"
    shadow-intensity="1">
</model-viewer>

<!-- Marcador de suelo -->
<div id="marker"></div>

<!-- Controles -->
<div id="controls">
    <button id="placeButton">Place Model</button>
    <button id="resetButton">Reset</button>
</div>

<!-- Script para interacciones -->
<script>
    const viewer = document.getElementById('ar-viewer');
    const marker = document.getElementById('marker');
    const placeButton = document.getElementById('placeButton');
    const resetButton = document.getElementById('resetButton');
    let modelPlaced = false;

    // Mostrar marcador cuando se toca la pantalla
    document.addEventListener('click', (event) => {
        if (!modelPlaced) {
            marker.style.display = 'block';
            marker.style.left = `${event.clientX - marker.offsetWidth / 2}px`;
            marker.style.top = `${event.clientY - marker.offsetHeight / 2}px`;
        }
    });

    // Colocar el modelo en la posición del marcador
    placeButton.addEventListener('click', () => {
        if (!modelPlaced) {
            const rect = marker.getBoundingClientRect();
            const x = rect.left + rect.width / 2;
            const y = rect.top + rect.height / 2;

            // Coloca el modelo en la posición del marcador
            viewer.setAttribute('style', `position: absolute; left: ${x}px; top: ${y}px; transform: translate(-50%, -50%);`);

            modelPlaced = true;
            marker.style.display = 'none'; // Ocultar el marcador una vez que se coloca el modelo
        }
    });

    // Resetear la escena
    resetButton.addEventListener('click', () => {
        modelPlaced = false;
        viewer.setAttribute('style', '');
        marker.style.display = 'none';
    });
</script>

</body>
</html>
