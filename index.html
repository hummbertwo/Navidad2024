<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>AR.js with Cube Placement</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar-nft.min.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden">
    <a-scene
      embedded
      vr-mode-ui="enabled: false"
      renderer="logarithmicDepthBuffer: true;"
      arjs="sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3; debugUIEnabled: false;"
    >
      <!-- Círculo indicador para la posición del cubo -->
      <a-circle
        id="indicator"
        position="0 0 -5"  <!-- Alejado más de la cámara -->
        radius="0.2"      <!-- Círculo más pequeño -->
        color="blue"
        material="opacity: 0.5;"
        cursor="rayOrigin: mouse"
        class="clickable"
      ></a-circle>

      <!-- Entidad del cubo, inicialmente invisible -->
      <a-box
        id="cube"
        position="0 0 -5"  <!-- Alejado más de la cámara -->
        rotation="0 45 45"
        scale="0 0 0"       <!-- Inicia oculto -->
        color="red"
      ></a-box>

      <!-- Cámara AR con ajuste de FOV -->
      <a-entity
        camera
        look-controls
        wasd-controls
        fov="75"                   <!-- Ajuste del campo de visión -->
        arjs
      ></a-entity>

      <!-- Manejo de eventos para colocar el cubo -->
      <script>
        document.querySelector('#indicator').addEventListener('click', function () {
          const cube = document.querySelector('#cube');
          const indicator = document.querySelector('#indicator');
          
          // Reemplaza el círculo con el cubo
          cube.setAttribute('scale', '0.3 0.3 0.3');  <!-- Cubo más pequeño -->
          indicator.setAttribute('visible', 'false');
        });
      </script>
    </a-scene>
  </body>
</html>